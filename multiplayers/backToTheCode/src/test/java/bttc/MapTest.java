package bttc;

import static org.hamcrest.CoreMatchers.is;
import static org.junit.Assert.assertThat;

import java.util.Scanner;

import org.junit.Test;

public class MapTest {
  static String NL = "\r\n";
  
  @Test
  public void emptyMap_score_is_0() throws Exception {
    Map map = new Map();
    int score = map.fillForPoints();
    
    assertThat(score, is(0));
  }

  @Test
  public void simpleSqaureMap_score1_plus_one() throws Exception {
    Map map = new Map();
    String lines = 
        "000................................"+NL+
        "0.0................................"+NL+
        "000................................"+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "";
    map.read(new Scanner(lines));
    
    
    int score = map.fillForPoints();
    
    assertThat(score, is(1));
  }

  @Test
  public void bigSquareMap_score10_plus_1() throws Exception {
    Map map = new Map();
    String lines = 
        "000000000000......................."+NL+
        "0..........0......................."+NL+
        "000000000000......................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "";
    map.read(new Scanner(lines));
    
    int score = map.fillForPoints();
    
    assertThat(score, is(10));
  }

  @Test
  public void theBiggestSquarePossible_score10_plus_1() throws Exception {
    Map map = new Map();
    String lines = 
        "00000000000000000000000000000000000"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "00000000000000000000000000000000000"+NL+
        "";
    map.read(new Scanner(lines));
    
    int score = map.fillForPoints();
    
    assertThat(score, is(594));
  }
  
  @Test
  public void theBiggestSquarePossibleWithAHole_score1() throws Exception {
    Map map = new Map();
    String lines = 
        "00000000000000000000000000000000000"+NL+
        "0.................................."+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "00000000000000000000000000000000000"+NL+
        "";
    map.read(new Scanner(lines));
    
    int score = map.fillForPoints();
    
    assertThat(score, is(0));
  }
  
  @Test
  public void double_score20_plus_1() throws Exception {
    Map map = new Map();
    String lines = 
        "000000000000......................."+NL+
        "0..........0......................."+NL+
        "00000000000........................"+NL+
        "0..........0......................."+NL+
        "000000000000......................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "";
    map.read(new Scanner(lines));
    
    map.move(0, 11, 2);
    int score = map.fillForPoints();
    
    assertThat(score, is(20));
  }
  
  @Test
  public void theBiggestSquarePossibleWihtOneEnnemyit_score1_plus_0() throws Exception {
    Map map = new Map();
    String lines = 
        "00000000000000000000000000000000000"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0............1....................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "0.................................0"+NL+
        "00000000000000000000000000000000000"+NL+
        "";
    map.read(new Scanner(lines));
    
    int score = map.fillForPoints();
    
    assertThat(score, is(0));
  }
  
  @Test
  public void live() throws Exception {
    Map map = new Map();
    String lines = 
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "...............00.................."+NL+
        "..............000.................."+NL+
        "..............0.00................."+NL+
        "..............0.00................."+NL+
        ".............00...................."+NL+
        "..............0000................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "..................................."+NL+
        "";
    map.read(new Scanner(lines));
    map.move(0, 17, 11);
    int score = map.fillForPoints();
    
    assertThat(score, is(4));
  }
}
